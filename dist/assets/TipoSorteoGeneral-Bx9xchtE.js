import{r as n,j as e,L as T,I as G,M as ie,S as v,N as I,K as h,O as se,P as le,Q as ce}from"./index-BM2Wk8gr.js";import{I as s,j as w,M as H,k as de}from"./InputGeneral-CUzjRp7w.js";import{A as me,E as pe,D as ue}from"./Edit-Cm45UK50.js";const he=[{title:"Codigo",field:"id"},{title:"Nombre",field:"nombre"},{title:"Fondo",field:"fondo"},{title:"Porcentaje De Pago",field:"porcentajePago"},{title:"Hora De Fin",field:"horaFin"}],xe="http://190.113.84.163:8000/TipoSorteoGeneral/RecTipoSorteoGeneral",je="http://190.113.84.163:8000/TipoSorteoGeneral/InsTipoSorteoGeneral",be="http://190.113.84.163:8000/TipoSorteoGeneral/ModTipoSorteoGeneral",Ee="http://190.113.84.163:8000/TipoSorteoGeneral/DelTipoSorteoGeneral",Se="http://190.113.84.163:8000/TipoSorteoGeneral/RecTipoSorteoGeneralXId",Pe=()=>{const l={campo:"",valido:null},[t,x]=n.useState(l),[c,j]=n.useState(l),[d,b]=n.useState({campo:0,valido:null}),[p,E]=n.useState({campo:0,valido:null}),[u,S]=n.useState(l),[M,z]=n.useState(!1),[g,f]=n.useState([]),[k,U]=n.useState(!1),[B,X]=n.useState(!1),[R,V]=n.useState(!1),i={Id:/^[0-9]*$/,Nombre:/^[a-zA-Z0-9_-\s]{1,40}$/,Fondo:/^[0-9]*$/,PorcentajePago:/^[0-9]*$/,HoraFin:/^[0-9]*$/},q=()=>{x(l),j(l),b(l),E(l),S(l)},J=o=>o.every(r=>r.valido==="true"),A=(o,r,a)=>{console.log(a),o.preventDefault(),J(a)?(z(!0),q(),r()):z(!1)},K=o=>A(o,Z,[t,c,d,p,u]),Y=o=>A(o,_,[t,c,d,p,u]),$=async()=>{const o={id:t.campo,nombre:"",fondo:0,porcentajePago:0,horaFin:""};try{if((await h.post(Se,o)).data===null)return;x({campo:"",valido:"false"}),v.fire({icon:"error",title:"Cuidado",text:"CÃ³digo Tipo de Sorteo Existente, Intente Nuevamente"})}catch(r){console.error("Error:",r)}},Z=()=>y("Desea Guardar Los Cambios?",ee),_=()=>y("Desea Editar Los Cambios?",oe),W=()=>y("Desea Eliminar Los Cambios?",re),y=(o,r)=>{v.fire({title:o,showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(a=>{a.isConfirmed?(v.fire("Operacion Exitosa","","success"),r()):a.isDenied&&v.fire("Cambios No Guardados","","info")})},ee=async()=>{const o=I();if(!o)return;const r={Id:t.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.post(je,r,{headers:{Authorization:`Bearer ${o}`}});f([...g,a.data]),F()}catch(a){console.error("Error en la peticion Post: ",a)}},oe=async()=>{const o=I();if(!o)return;const r={Id:t.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.put(be,r,{headers:{Authorization:`Bearer ${o}`}}),m=g.map(Q=>Q.id===r.idTipoSorteoGeneral?r:Q);f(m),P()}catch(a){console.error("Error En La Peticion Post: ",a)}},re=async()=>{const o=I();if(!o)return;const r=t.campo,a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},data:JSON.stringify(r)};try{await h.delete(Ee,a),f(g.filter(m=>m.Id!==t.campo)),D(),O()}catch(m){console.error("Error Al Eliminar el Tipo de Sorteo: ",m)}},L=async(o,r)=>{const a=Object.values(...o);x({campo:a[0],valido:"true"}),j({campo:a[1],valido:"true"}),b({campo:a[2],valido:"true"}),E({campo:a[3],valido:"true"}),S({campo:a[4],valido:"true"}),r==="Editar"?P():D()},O=async()=>{const o=I();if(o)try{const r=await h.get(xe,{headers:{Authorization:`Bearer ${o}`}});f(r.data)}catch{console.error("Error al obtener los tipos de sorteos",error)}};n.useEffect(()=>{O()},[]);const F=()=>{U(!k)},P=()=>{X(!B)},D=()=>{V(!R)},C={width:"70%",height:"100%",overflowX:"hidden",overflowY:"scroll",position:"relative",backgroundColor:"rgb(255, 255, 255)"},N=({titulo:o,formularioValido:r,onCancel:a,onSubmit:m})=>e.jsxs(e.Fragment,{children:[r===!1&&e.jsx(se,{children:e.jsxs("p",{children:[e.jsx(le,{icon:de}),e.jsx("b",{children:"Error:"})," Por favor rellena el formulario correctamente."]})}),r===!0&&e.jsx(ce,{children:"Campos llenos exitosamente!"}),e.jsxs("div",{align:"right",children:[e.jsx(w,{color:"success",onClick:a,children:"Cancelar"}),e.jsx(w,{color:"primary",onClick:m,type:"submit",children:o})]})]}),ae=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Incluir Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsx(s,{estado:t,cambiarEstado:x,tipo:"text",label:"Id Tipo De Sorteo Geeral",placeholder:"Introduzca Id Del Tipo de Sorteo",name:"Id",leyendaError:"El Id Del Tipo de Sorteo solo puede contener numeros.",expresionRegular:i.Id,onChange:$,onBlur:$,autofocus:!0}),e.jsx(s,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:i.Nombre}),e.jsx(s,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:i.Fondo}),e.jsx(s,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:i.PorcentajePago}),e.jsx(s,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:i.HoraFin})]})})})]}),e.jsx(N,{titulo:"Insertar",formularioValido:M,onCancel:F,onSubmit:K})]}),ne=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Editar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:["General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsx(s,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:i.Nombre,value:c.campo}),e.jsx(s,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:i.Fondo,value:d.campo}),e.jsx(s,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:i.PorcentajePago,value:p.campo}),e.jsx(s,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:i.HoraFin,value:u.campo})]})})})]}),e.jsx(N,{titulo:"Editar",formularioValido:M,onCancel:P,onSubmit:Y})]}),te=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Eliminar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsxs("h4",{children:["Codigo: ",t.campo]}),e.jsxs("h4",{children:["Nombre: ",c.campo]}),e.jsxs("h4",{children:["Fondo: ",d.campo]}),e.jsxs("h4",{children:["PorcentajePago: ",p.campo]}),e.jsxs("h4",{children:["HoraFin: ",u.campo]})]})})})]}),e.jsx(N,{titulo:"Eliminar",onCancel:D,onSubmit:W})]});return e.jsxs("div",{className:"Cliente",children:[e.jsx("div",{className:"banner",children:e.jsx("h3",{children:e.jsx("b",{children:"200-Mantenimiento Tipo De Sorteos General"})})}),e.jsx("div",{className:"btn-agrega",children:e.jsx(w,{startIcon:e.jsx(me,{}),onClick:()=>F(),children:"Agregar Tipo De Sorteo General"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ie,{columns:he,data:g,title:"Tipo De Sorteo General",actions:[{icon:pe,tooltip:"Modificar",onClick:(o,r)=>L(r,"Editar")},{icon:ue,tooltip:"Eliminar",onClick:(o,r)=>L(r,"Eliminar")}],options:{actionsColumnIndex:-1,exportButton:!0,columnsButton:!0,headerStyle:{backgroundColor:"lightgrey"},selection:!0,showTextRowSelected:!1,showSelectedAllheckbox:!1,searchFieldAligment:"left",showtitle:!1},localization:{header:{actions:"Acciones"},toolbar:{searchPlaceholder:"Busqueda"}}}),e.jsx(H,{open:k,onClose:F,children:e.jsx(e.Fragment,{children:ae})}),e.jsx(H,{open:B,onClose:P,children:e.jsx(e.Fragment,{children:ne})}),e.jsx(H,{open:R,onClose:D,children:e.jsx(e.Fragment,{children:te})})]})};export{Pe as default};
