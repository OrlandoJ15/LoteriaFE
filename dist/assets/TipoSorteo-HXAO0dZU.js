import{r as t,j as e,N as I,J as F,M as te,S as v,P as g,L as p,Q as ne,R as se,U as ie}from"./index-C541Cvoq.js";import{j as w,M as G,k as le,I as u}from"./InputGeneral-B_Uw0e4L.js";import{A as ce,E as de,D as me}from"./Edit-ecBkNYLs.js";const ue=[{title:"Codigo",field:"id"},{title:"Numero Ganador",field:"numeroGanador"},{title:"Id Tipo Sorteo General",field:"idTipoSorteoGeneral"},{title:"Nombre",field:"nombreTipoSorteoGeneral"},{title:"Fecha",field:"fecha"}],pe="https://loteriawebapimvp.azurewebsites.net/TipoSorteo/RecTipoSorteo",he="https://loteriawebapimvp.azurewebsites.net/TipoSorteo/InsTipoSorteo",xe="https://loteriawebapimvp.azurewebsites.net/TipoSorteo/ModTipoSorteo",be="https://loteriawebapimvp.azurewebsites.net/TipoSorteo/DelTipoSorteo",je="https://loteriawebapimvp.azurewebsites.net/TipoSorteo/RecTipoSorteoXId",Ne=()=>{const s={campo:"",valido:null},[n,h]=t.useState(s),[i,x]=t.useState(s),[l,b]=t.useState(s),[c,j]=t.useState(s),[P,z]=t.useState(!1),[E,S]=t.useState([]),[M,U]=t.useState(!1),[k,O]=t.useState(!1),[B,X]=t.useState(!1),d={Id:/^[0-9]*$/,NumeroGanador:/^[0-9]*$/,Nombre:/^[a-zA-Z0-9_-\s]{1,40}$/,Fecha:/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/},V=()=>{h(s),x(s),b(s),j(s)},Y=o=>o.every(r=>r.valido==="true"),A=(o,r,a)=>{console.log(a),o.preventDefault(),Y(a)?(z(!0),V(),r()):z(!1)},J=o=>A(o,Z,[n,i,l,c]),q=o=>A(o,_,[n,i,l,c]),R=async()=>{const o={id:n.campo,numeroGanador:0,nombre:"",fecha:new Date(null)};try{if((await p.post(je,o)).data===null)return;h({campo:"",valido:"false"}),v.fire({icon:"error",title:"Cuidado",text:"CÃ³digo Tipo de Sorteo Existente, Intente Nuevamente"})}catch(r){console.error("Error:",r)}},Z=()=>C("Desea Guardar Los Cambios?",K),_=()=>C("Desea Editar Los Cambios?",W),H=()=>C("Desea Eliminar Los Cambios?",ee),C=(o,r)=>{v.fire({title:o,showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(a=>{a.isConfirmed?(v.fire("Operacion Exitosa","","success"),r()):a.isDenied&&v.fire("Cambios No Guardados","","info")})},K=async()=>{const o=g();if(!o)return;const r={Id:n.campo,NumeroGanador:i.campo,Nombre:l.campo,Fecha:c.campo};try{const a=await p.post(he,r,{headers:{Authorization:`Bearer ${o}`}});S([...E,a.data]),f()}catch(a){console.error("Error en la peticion Post: ",a)}},W=async()=>{const o=g();if(!o)return;const r={id:n.campo,numeroGanador:i.campo,nombre:l.campo,fecha:c.campo};try{const a=await p.put(xe,r,{headers:{Authorization:`Bearer ${o}`}}),m=E.map(Q=>Q.id===r.id?r:Q);S(m),N()}catch(a){console.error("Error En La Peticion Post: ",a)}},ee=async()=>{const o=g();if(!o)return;const r=n.campo,a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},data:JSON.stringify(r)};try{await p.delete(be,a),S(E.filter(m=>m.Id!==n.campo)),T(),$()}catch(m){console.error("Error Al Eliminar el Tipo de Sorteo: ",m)}},L=async(o,r)=>{const a=Object.values(...o);h({campo:a[0],valido:"true"}),x({campo:a[1],valido:"true"}),b({campo:a[2],valido:"true"}),j({campo:a[3],valido:"true"}),r==="Editar"?N():T()},$=async()=>{const o=g();if(o)try{const r=await p.get(pe,{headers:{Authorization:`Bearer ${o}`}});S(r.data)}catch{console.error("Error al obtener los tipos de sorteos",error)}};t.useEffect(()=>{$()},[]);const f=()=>{U(!M)},N=()=>{O(!k)},T=()=>{X(!B)},D={width:"70%",height:"100%",overflowX:"hidden",overflowY:"scroll",position:"relative",backgroundColor:"rgb(255, 255, 255)"},y=({titulo:o,formularioValido:r,onCancel:a,onSubmit:m})=>e.jsxs(e.Fragment,{children:[r===!1&&e.jsx(ne,{children:e.jsxs("p",{children:[e.jsx(se,{icon:le}),e.jsx("b",{children:"Error:"})," Por favor rellena el formulario correctamente."]})}),r===!0&&e.jsx(ie,{children:"Campos llenos exitosamente!"}),e.jsxs("div",{align:"right",children:[e.jsx(w,{color:"success",onClick:a,children:"Cancelar"}),e.jsx(w,{color:"primary",onClick:m,type:"submit",children:o})]})]}),oe=e.jsxs("div",{style:D,children:[e.jsx("h3",{children:"Incluir Tipo De Sorteo"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(I,{children:e.jsxs(F,{children:[e.jsx(u,{estado:n,cambiarEstado:h,tipo:"text",label:"Id Tipo De Sorteo",placeholder:"Introduzca Id Del Tipo de Sorteo",name:"Id",leyendaError:"El Id Del Tipo de Sorteo solo puede contener numeros.",expresionRegular:d.Id,onChange:R,onBlur:R,autofocus:!0}),e.jsx(u,{estado:i,cambiarEstado:x,tipo:"text",label:"NumeroGanador",placeholder:"Introduzca El Numero Ganador",name:"NumeroGanador",leyendaError:"El Numero Ganador Solo Puede Contener Numeros.",expresionRegular:d.NumeroGanador}),e.jsx(u,{estado:l,cambiarEstado:b,tipo:"text",label:"Nombre del Sorteo",placeholder:"Introduzca El Tipo De Sorteo",name:"Nombre",leyendaError:"El Nombre Del Tipo De Sorteo Solo Puede ontener Numeros Y Letras.",expresionRegular:d.Nombre}),e.jsx(u,{estado:c,cambiarEstado:j,tipo:"date",label:"Fecha",placeholder:"Introduzca La Fecha",name:"Fecha",leyendaError:"La Fecha De  Debe Tener Formato De Fecha",expresionRegular:d.Fecha})]})})})]}),e.jsx(y,{titulo:"Insertar",formularioValido:P,onCancel:f,onSubmit:J})]}),re=e.jsxs("div",{style:D,children:[e.jsx("h3",{children:"Editar Tipo De Sorteo"}),e.jsxs("div",{className:"relleno-general",children:["General",e.jsx("div",{className:"container-fluid",children:e.jsx(I,{children:e.jsxs(F,{children:[e.jsx(u,{estado:i,cambiarEstado:x,tipo:"text",label:"NumeroGanador",placeholder:"Introduzca El Numero Ganador",name:"NumeroGanador",leyendaError:"El Numero Ganador Solo Puede Contener Numeros.",expresionRegular:d.NumeroGanador}),e.jsx(u,{estado:l,cambiarEstado:b,tipo:"text",label:"Nombre del Sorteo",placeholder:"Introduzca El Tipo De Sorteo",name:"Nombre",leyendaError:"El Nombre Del Tipo De Sorteo Solo Puede ontener Numeros Y Letras.",expresionRegular:d.Nombre}),e.jsx(u,{estado:c,cambiarEstado:j,tipo:"date",label:"Fecha",placeholder:"Introduzca La Fecha",name:"Fecha",leyendaError:"La Fecha De  Debe Tener Formato De Fecha",expresionRegular:d.Fecha})]})})})]}),e.jsx(y,{titulo:"Editar",formularioValido:P,onCancel:N,onSubmit:q})]}),ae=e.jsxs("div",{style:D,children:[e.jsx("h3",{children:"Eliminar Tipo De Sorteo"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(I,{children:e.jsxs(F,{children:[e.jsxs("h4",{children:["Codigo: ",n.campo]}),e.jsxs("h4",{children:["Numero Ganador: ",i.campo]}),e.jsxs("h4",{children:["Nombre: ",l.campo]}),e.jsxs("h4",{children:["Fecha: ",c.campo]})]})})})]}),e.jsx(y,{titulo:"Eliminar",onCancel:T,onSubmit:H})]});return e.jsxs("div",{className:"Cliente",children:[e.jsx("div",{className:"banner",children:e.jsx("h3",{children:e.jsx("b",{children:"200-Mantenimiento Tipo De Sorteos"})})}),e.jsx("div",{className:"btn-agrega",children:e.jsx(w,{startIcon:e.jsx(ce,{}),onClick:()=>f(),children:"Agregar Tipo De Sorteo"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(te,{columns:ue,data:E,title:"Tipo De Sorteos",actions:[{icon:de,tooltip:"Modificar",onClick:(o,r)=>L(r,"Editar")},{icon:me,tooltip:"Eliminar",onClick:(o,r)=>L(r,"Eliminar")}],options:{actionsColumnIndex:-1,exportButton:!0,columnsButton:!0,headerStyle:{backgroundColor:"lightgrey"},selection:!0,showTextRowSelected:!1,showSelectedAllheckbox:!1,searchFieldAligment:"left",showtitle:!1},localization:{header:{actions:"Acciones"},toolbar:{searchPlaceholder:"Busqueda"}}}),e.jsx(G,{open:M,onClose:f,children:e.jsx(e.Fragment,{children:oe})}),e.jsx(G,{open:k,onClose:N,children:e.jsx(e.Fragment,{children:re})}),e.jsx(G,{open:B,onClose:T,children:e.jsx(e.Fragment,{children:ae})})]})};export{Ne as default};
