import{r as t,j as e,L as T,I as G,M as ie,S as D,O as y,K as h,P as se,Q as le,R as ce}from"./index-C9xMqd9z.js";import{I as s,j as w,M as z,k as de}from"./InputGeneral-Do5fAD7f.js";import{A as me,E as pe,D as ue}from"./Edit-B-lilJ91.js";const he=[{title:"Codigo",field:"id"},{title:"Nombre",field:"nombre"},{title:"Fondo",field:"fondo"},{title:"Porcentaje De Pago",field:"porcentajePago"},{title:"Hora De Fin",field:"horaFin"}],xe="https://loteriawebapimvp.azurewebsites.net/TipoSorteoGeneral/RecTipoSorteoGeneral",je="https://loteriawebapimvp.azurewebsites.net/TipoSorteoGeneral/InsTipoSorteoGeneral",be="https://loteriawebapimvp.azurewebsites.net/TipoSorteoGeneral/ModTipoSorteoGeneral",Ee="https://loteriawebapimvp.azurewebsites.net/TipoSorteoGeneral/DelTipoSorteoGeneral",Fe=()=>{const l={campo:"",valido:null},[n,x]=t.useState(l),[c,j]=t.useState(l),[d,b]=t.useState({campo:0,valido:null}),[p,E]=t.useState({campo:0,valido:null}),[u,S]=t.useState(l),[H,M]=t.useState(!1),[g,f]=t.useState([]),[k,U]=t.useState(!1),[B,V]=t.useState(!1),[R,X]=t.useState(!1),i={Id:/^[0-9]*$/,Nombre:/^[a-zA-Z0-9_-\s]{1,40}$/,Fondo:/^[0-9]*$/,PorcentajePago:/^[0-9]*$/,HoraFin:/^[0-9]*$/},q=()=>{x(l),j(l),b(l),E(l),S(l)},J=o=>o.every(r=>r.valido==="true"),A=(o,r,a)=>{console.log(a),o.preventDefault(),J(a)?(M(!0),q(),r()):M(!1)},K=o=>A(o,Z,[n,c,d,p,u]),Y=o=>A(o,_,[n,c,d,p,u]),$=async()=>{const o={id:n.campo,nombre:"",fondo:0,porcentajePago:0,horaFin:""};try{if((await h.post(EndPointTipoSorteoGeneralXId,o)).data===null)return;x({campo:"",valido:"false"}),D.fire({icon:"error",title:"Cuidado",text:"CÃ³digo Tipo de Sorteo Existente, Intente Nuevamente"})}catch(r){console.error("Error:",r)}},Z=()=>I("Desea Guardar Los Cambios?",ee),_=()=>I("Desea Editar Los Cambios?",oe),W=()=>I("Desea Eliminar Los Cambios?",re),I=(o,r)=>{D.fire({title:o,showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(a=>{a.isConfirmed?(D.fire("Operacion Exitosa","","success"),r()):a.isDenied&&D.fire("Cambios No Guardados","","info")})},ee=async()=>{const o=y();if(!o)return;const r={Id:n.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.post(je,r,{headers:{Authorization:`Bearer ${o}`}});f([...g,a.data]),F()}catch(a){console.error("Error en la peticion Post: ",a)}},oe=async()=>{const o=y();if(!o)return;const r={Id:n.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.put(be,r,{headers:{Authorization:`Bearer ${o}`}}),m=g.map(Q=>Q.id===r.idTipoSorteoGeneral?r:Q);f(m),P()}catch(a){console.error("Error En La Peticion Post: ",a)}},re=async()=>{const o=y();if(!o)return;const r=n.campo,a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},data:JSON.stringify(r)};try{await h.delete(Ee,a),f(g.filter(m=>m.Id!==n.campo)),v(),O()}catch(m){console.error("Error Al Eliminar el Tipo de Sorteo: ",m)}},L=async(o,r)=>{const a=Object.values(...o);x({campo:a[0],valido:"true"}),j({campo:a[1],valido:"true"}),b({campo:a[2],valido:"true"}),E({campo:a[3],valido:"true"}),S({campo:a[4],valido:"true"}),r==="Editar"?P():v()},O=async()=>{const o=y();if(o)try{const r=await h.get(xe,{headers:{Authorization:`Bearer ${o}`}});f(r.data)}catch{console.error("Error al obtener los tipos de sorteos",error)}};t.useEffect(()=>{O()},[]);const F=()=>{U(!k)},P=()=>{V(!B)},v=()=>{X(!R)},C={width:"70%",height:"100%",overflowX:"hidden",overflowY:"scroll",position:"relative",backgroundColor:"rgb(255, 255, 255)"},N=({titulo:o,formularioValido:r,onCancel:a,onSubmit:m})=>e.jsxs(e.Fragment,{children:[r===!1&&e.jsx(se,{children:e.jsxs("p",{children:[e.jsx(le,{icon:de}),e.jsx("b",{children:"Error:"})," Por favor rellena el formulario correctamente."]})}),r===!0&&e.jsx(ce,{children:"Campos llenos exitosamente!"}),e.jsxs("div",{align:"right",children:[e.jsx(w,{color:"success",onClick:a,children:"Cancelar"}),e.jsx(w,{color:"primary",onClick:m,type:"submit",children:o})]})]}),ae=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Incluir Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsx(s,{estado:n,cambiarEstado:x,tipo:"text",label:"Id Tipo De Sorteo Geeral",placeholder:"Introduzca Id Del Tipo de Sorteo",name:"Id",leyendaError:"El Id Del Tipo de Sorteo solo puede contener numeros.",expresionRegular:i.Id,onChange:$,onBlur:$,autofocus:!0}),e.jsx(s,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:i.Nombre}),e.jsx(s,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:i.Fondo}),e.jsx(s,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:i.PorcentajePago}),e.jsx(s,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:i.HoraFin})]})})})]}),e.jsx(N,{titulo:"Insertar",formularioValido:H,onCancel:F,onSubmit:K})]}),te=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Editar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:["General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsx(s,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:i.Nombre,value:c.campo}),e.jsx(s,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:i.Fondo,value:d.campo}),e.jsx(s,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:i.PorcentajePago,value:p.campo}),e.jsx(s,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:i.HoraFin,value:u.campo})]})})})]}),e.jsx(N,{titulo:"Editar",formularioValido:H,onCancel:P,onSubmit:Y})]}),ne=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Eliminar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(T,{children:e.jsxs(G,{children:[e.jsxs("h4",{children:["Codigo: ",n.campo]}),e.jsxs("h4",{children:["Nombre: ",c.campo]}),e.jsxs("h4",{children:["Fondo: ",d.campo]}),e.jsxs("h4",{children:["PorcentajePago: ",p.campo]}),e.jsxs("h4",{children:["HoraFin: ",u.campo]})]})})})]}),e.jsx(N,{titulo:"Eliminar",onCancel:v,onSubmit:W})]});return e.jsxs("div",{className:"Cliente",children:[e.jsx("div",{className:"banner",children:e.jsx("h3",{children:e.jsx("b",{children:"200-Mantenimiento Tipo De Sorteos General"})})}),e.jsx("div",{className:"btn-agrega",children:e.jsx(w,{startIcon:e.jsx(me,{}),onClick:()=>F(),children:"Agregar Tipo De Sorteo General"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(ie,{columns:he,data:g,title:"Tipo De Sorteo General",actions:[{icon:pe,tooltip:"Modificar",onClick:(o,r)=>L(r,"Editar")},{icon:ue,tooltip:"Eliminar",onClick:(o,r)=>L(r,"Eliminar")}],options:{actionsColumnIndex:-1,exportButton:!0,columnsButton:!0,headerStyle:{backgroundColor:"lightgrey"},selection:!0,showTextRowSelected:!1,showSelectedAllheckbox:!1,searchFieldAligment:"left",showtitle:!1},localization:{header:{actions:"Acciones"},toolbar:{searchPlaceholder:"Busqueda"}}}),e.jsx(z,{open:k,onClose:F,children:e.jsx(e.Fragment,{children:ae})}),e.jsx(z,{open:B,onClose:P,children:e.jsx(e.Fragment,{children:te})}),e.jsx(z,{open:R,onClose:v,children:e.jsx(e.Fragment,{children:ne})})]})};export{Fe as default};
