import{r as t,j as e,a8 as N,a4 as G,a6 as se,a9 as v,aa as y,a7 as h,ab as ie,ac as le,ad as ce}from"./index-i6cV1Y3u.js";import{I as i,A as de,E as me,D as pe,f as ue}from"./InputGeneral-CaHIVkyX.js";import{n as w,M as H}from"./Modal-y4NBJ25E.js";const he=[{title:"Codigo",field:"id"},{title:"Nombre",field:"nombre"},{title:"Fondo",field:"fondo"},{title:"Porcentaje De Pago",field:"porcentajePago"},{title:"Hora De Fin",field:"horaFin"}],xe="https://localhost:44366/TipoSorteoGeneral/RecTipoSorteoGeneral",je="https://localhost:44366/TipoSorteoGeneral/InsTipoSorteoGeneral",be="https://localhost:44366/TipoSorteoGeneral/ModTipoSorteoGeneral",Ee="https://localhost:44366/TipoSorteoGeneral/DelTipoSorteoGeneral",Se="https://localhost:44366/TipoSorteoGeneral/RecTipoSorteoGeneralXId",Pe=()=>{const l={campo:"",valido:null},[n,x]=t.useState(l),[c,j]=t.useState(l),[d,b]=t.useState({campo:0,valido:null}),[p,E]=t.useState({campo:0,valido:null}),[u,S]=t.useState(l),[z,M]=t.useState(!1),[f,g]=t.useState([]),[B,U]=t.useState(!1),[R,X]=t.useState(!1),[k,V]=t.useState(!1),s={Id:/^[0-9]*$/,Nombre:/^[a-zA-Z0-9_-\s]{1,40}$/,Fondo:/^[0-9]*$/,PorcentajePago:/^[0-9]*$/,HoraFin:/^[0-9]*$/},q=()=>{x(l),j(l),b(l),E(l),S(l)},J=o=>o.every(r=>r.valido==="true"),A=(o,r,a)=>{console.log(a),o.preventDefault(),J(a)?(M(!0),q(),r()):M(!1)},Y=o=>A(o,_,[n,c,d,p,u]),Z=o=>A(o,K,[n,c,d,p,u]),$=async()=>{const o={id:n.campo,nombre:"",fondo:0,porcentajePago:0,horaFin:""};try{if((await h.post(Se,o)).data===null)return;x({campo:"",valido:"false"}),v.fire({icon:"error",title:"Cuidado",text:"CÃ³digo Tipo de Sorteo Existente, Intente Nuevamente"})}catch(r){console.error("Error:",r)}},_=()=>I("Desea Guardar Los Cambios?",ee),K=()=>I("Desea Editar Los Cambios?",oe),W=()=>I("Desea Eliminar Los Cambios?",re),I=(o,r)=>{v.fire({title:o,showDenyButton:!0,confirmButtonText:"Confirmar",denyButtonText:"Cancelar"}).then(a=>{a.isConfirmed?(v.fire("Operacion Exitosa","","success"),r()):a.isDenied&&v.fire("Cambios No Guardados","","info")})},ee=async()=>{const o=y();if(!o)return;const r={Id:n.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.post(je,r,{headers:{Authorization:`Bearer ${o}`}});g([...f,a.data]),F()}catch(a){console.error("Error en la peticion Post: ",a)}},oe=async()=>{const o=y();if(!o)return;const r={Id:n.campo,Nombre:c.campo,Fondo:d.campo,PorcentajePago:porcentaje.campo,HoraFin:horaFin.campo};try{const a=await h.put(be,r,{headers:{Authorization:`Bearer ${o}`}}),m=f.map(Q=>Q.id===r.idTipoSorteoGeneral?r:Q);g(m),P()}catch(a){console.error("Error En La Peticion Post: ",a)}},re=async()=>{const o=y();if(!o)return;const r=n.campo,a={headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},data:JSON.stringify(r)};try{await h.delete(Ee,a),g(f.filter(m=>m.Id!==n.campo)),D(),O()}catch(m){console.error("Error Al Eliminar el Tipo de Sorteo: ",m)}},L=async(o,r)=>{const a=Object.values(...o);x({campo:a[0],valido:"true"}),j({campo:a[1],valido:"true"}),b({campo:a[2],valido:"true"}),E({campo:a[3],valido:"true"}),S({campo:a[4],valido:"true"}),r==="Editar"?P():D()},O=async()=>{const o=y();if(o)try{const r=await h.get(xe,{headers:{Authorization:`Bearer ${o}`}});g(r.data)}catch{console.error("Error al obtener los tipos de sorteos",error)}};t.useEffect(()=>{O()},[]);const F=()=>{U(!B)},P=()=>{X(!R)},D=()=>{V(!k)},C={width:"70%",height:"100%",overflowX:"hidden",overflowY:"scroll",position:"relative",backgroundColor:"rgb(255, 255, 255)"},T=({titulo:o,formularioValido:r,onCancel:a,onSubmit:m})=>e.jsxs(e.Fragment,{children:[r===!1&&e.jsx(ie,{children:e.jsxs("p",{children:[e.jsx(le,{icon:ue}),e.jsx("b",{children:"Error:"})," Por favor rellena el formulario correctamente."]})}),r===!0&&e.jsx(ce,{children:"Campos llenos exitosamente!"}),e.jsxs("div",{align:"right",children:[e.jsx(w,{color:"success",onClick:a,children:"Cancelar"}),e.jsx(w,{color:"primary",onClick:m,type:"submit",children:o})]})]}),ae=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Incluir Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(N,{children:e.jsxs(G,{children:[e.jsx(i,{estado:n,cambiarEstado:x,tipo:"text",label:"Id Tipo De Sorteo Geeral",placeholder:"Introduzca Id Del Tipo de Sorteo",name:"Id",leyendaError:"El Id Del Tipo de Sorteo solo puede contener numeros.",expresionRegular:s.Id,onChange:$,onBlur:$,autofocus:!0}),e.jsx(i,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:s.Nombre}),e.jsx(i,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:s.Fondo}),e.jsx(i,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:s.PorcentajePago}),e.jsx(i,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:s.HoraFin})]})})})]}),e.jsx(T,{titulo:"Insertar",formularioValido:z,onCancel:F,onSubmit:Y})]}),te=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Editar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:["General",e.jsx("div",{className:"container-fluid",children:e.jsx(N,{children:e.jsxs(G,{children:[e.jsx(i,{estado:c,cambiarEstado:j,tipo:"text",label:"Nombre",placeholder:"Introduzca El Nombre",name:"Nombre",leyendaError:"El Nombre solo puede contener letras y espacios.",expresionRegular:s.Nombre,value:c.campo}),e.jsx(i,{estado:d,cambiarEstado:b,tipo:"numeric",label:"Fondo del Sorteo",placeholder:"Introduzca el Fondo Para El Sorteo",name:"Fondo",leyendaError:"El Fondo Debe Ser Numerico",expresionRegular:s.Fondo,value:d.campo}),e.jsx(i,{estado:p,cambiarEstado:E,tipo:"numeric",label:"Porcentaje De Pago",placeholder:"Introduzca El Porcentaje De Pago",name:"FechaFin",leyendaError:"El Porcentaje De Pago Debe Ser Numerico",expresionRegular:s.PorcentajePago,value:p.campo}),e.jsx(i,{estado:u,cambiarEstado:S,tipo:"time",label:"Hora De Fin",placeholder:"Introduzca La Hora De Fin",name:"HoraFin",leyendaError:"Formato De Hora Incorrecta ",expresionRegular:s.HoraFin,value:u.campo})]})})})]}),e.jsx(T,{titulo:"Editar",formularioValido:z,onCancel:P,onSubmit:Z})]}),ne=e.jsxs("div",{style:C,children:[e.jsx("h3",{children:"Eliminar Tipo De Sorteo General"}),e.jsxs("div",{className:"relleno-general",children:[" ","General",e.jsx("div",{className:"container-fluid",children:e.jsx(N,{children:e.jsxs(G,{children:[e.jsxs("h4",{children:["Codigo: ",n.campo]}),e.jsxs("h4",{children:["Nombre: ",c.campo]}),e.jsxs("h4",{children:["Fondo: ",d.campo]}),e.jsxs("h4",{children:["PorcentajePago: ",p.campo]}),e.jsxs("h4",{children:["HoraFin: ",u.campo]})]})})})]}),e.jsx(T,{titulo:"Eliminar",onCancel:D,onSubmit:W})]});return e.jsxs("div",{className:"Cliente",children:[e.jsx("div",{className:"banner",children:e.jsx("h3",{children:e.jsx("b",{children:"200-Mantenimiento Tipo De Sorteos General"})})}),e.jsx("div",{className:"btn-agrega",children:e.jsx(w,{startIcon:e.jsx(de,{}),onClick:()=>F(),children:"Agregar Tipo De Sorteo General"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(se,{columns:he,data:f,title:"Tipo De Sorteo General",actions:[{icon:me,tooltip:"Modificar",onClick:(o,r)=>L(r,"Editar")},{icon:pe,tooltip:"Eliminar",onClick:(o,r)=>L(r,"Eliminar")}],options:{actionsColumnIndex:-1,exportButton:!0,columnsButton:!0,headerStyle:{backgroundColor:"lightgrey"},selection:!0,showTextRowSelected:!1,showSelectedAllheckbox:!1,searchFieldAligment:"left",showtitle:!1},localization:{header:{actions:"Acciones"},toolbar:{searchPlaceholder:"Busqueda"}}}),e.jsx(H,{open:B,onClose:F,children:e.jsx(e.Fragment,{children:ae})}),e.jsx(H,{open:R,onClose:P,children:e.jsx(e.Fragment,{children:te})}),e.jsx(H,{open:k,onClose:D,children:e.jsx(e.Fragment,{children:ne})})]})};export{Pe as default};
